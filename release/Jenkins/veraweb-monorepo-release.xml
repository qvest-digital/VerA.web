<?xml version='1.0' encoding='UTF-8'?>
<maven2-moduleset plugin="maven-plugin@2.10">
  <actions/>
  <description>&lt;p&gt;âš  DO NOT USE YET!!!&lt;/p&gt;&#xd;
&#xd;
&lt;p&gt;Regular builds of VerA.web (with OA) with Sonar, also, release job.&lt;/p&gt;&#xd;
&lt;p&gt;All builds update &lt;tt&gt;veraweb-po&lt;/tt&gt; currently.&lt;/p&gt;</description>
  <logRotator class="hudson.tasks.LogRotator">
    <daysToKeep>-1</daysToKeep>
    <numToKeep>5</numToKeep>
    <artifactDaysToKeep>-1</artifactDaysToKeep>
    <artifactNumToKeep>-1</artifactNumToKeep>
  </logRotator>
  <keepDependencies>false</keepDependencies>
  <properties>
    <hudson.security.AuthorizationMatrixProperty>
      <permission>com.cloudbees.plugins.credentials.CredentialsProvider.Create:veraweb</permission>
      <permission>hudson.model.Item.Build:veraweb</permission>
      <permission>hudson.model.Item.Cancel:veraweb</permission>
      <permission>com.cloudbees.plugins.credentials.CredentialsProvider.Update:veraweb</permission>
      <permission>com.cloudbees.plugins.credentials.CredentialsProvider.Delete:veraweb</permission>
      <permission>hudson.model.Item.Configure:veraweb</permission>
      <permission>hudson.scm.SCM.Tag:veraweb</permission>
      <permission>hudson.model.Item.Workspace:veraweb</permission>
      <permission>hudson.model.Item.Release:veraweb</permission>
      <permission>hudson.model.Run.Update:veraweb</permission>
      <permission>hudson.model.Item.Read:veraweb</permission>
    </hudson.security.AuthorizationMatrixProperty>
    <org.jenkins.plugins.lockableresources.RequiredResourcesProperty plugin="lockable-resources@1.7">
      <labelName>mr_veraweb</labelName>
    </org.jenkins.plugins.lockableresources.RequiredResourcesProperty>
  </properties>
  <scm class="hudson.plugins.git.GitSCM" plugin="git@2.2.12">
    <configVersion>2</configVersion>
    <userRemoteConfigs>
      <hudson.plugins.git.UserRemoteConfig>
        <url>git+ssh://maven@evolvis.org/scmrepos/git/veraweb/veraweb.git</url>
      </hudson.plugins.git.UserRemoteConfig>
    </userRemoteConfigs>
    <branches>
      <hudson.plugins.git.BranchSpec>
        <name>*/monorepo</name>
      </hudson.plugins.git.BranchSpec>
    </branches>
    <doGenerateSubmoduleConfigurations>false</doGenerateSubmoduleConfigurations>
    <submoduleCfg class="list"/>
    <extensions>
      <hudson.plugins.git.extensions.impl.LocalBranch>
        <localBranch>monorepo</localBranch>
      </hudson.plugins.git.extensions.impl.LocalBranch>
    </extensions>
  </scm>
  <canRoam>true</canRoam>
  <disabled>false</disabled>
  <blockBuildWhenDownstreamBuilding>false</blockBuildWhenDownstreamBuilding>
  <blockBuildWhenUpstreamBuilding>false</blockBuildWhenUpstreamBuilding>
  <jdk>(Inherit From Job)</jdk>
  <triggers>
    <hudson.triggers.SCMTrigger>
      <spec># alle 5 min
H/5 * * * *</spec>
      <ignorePostCommitHooks>false</ignorePostCommitHooks>
    </hudson.triggers.SCMTrigger>
  </triggers>
  <concurrentBuild>false</concurrentBuild>
  <rootModule>
    <groupId>org.evolvis.veraweb</groupId>
    <artifactId>veraweb-parent</artifactId>
  </rootModule>
  <goals>-Platex -Prelease -PoA -e clean install</goals>
  <aggregatorStyleBuild>true</aggregatorStyleBuild>
  <incrementalBuild>false</incrementalBuild>
  <ignoreUpstremChanges>false</ignoreUpstremChanges>
  <archivingDisabled>true</archivingDisabled>
  <siteArchivingDisabled>false</siteArchivingDisabled>
  <fingerprintingDisabled>false</fingerprintingDisabled>
  <resolveDependencies>false</resolveDependencies>
  <processPlugins>false</processPlugins>
  <mavenValidationLevel>-1</mavenValidationLevel>
  <runHeadless>false</runHeadless>
  <disableTriggerDownstreamProjects>false</disableTriggerDownstreamProjects>
  <blockTriggerWhenBuilding>true</blockTriggerWhenBuilding>
  <settings class="jenkins.mvn.DefaultSettingsProvider"/>
  <globalSettings class="jenkins.mvn.DefaultGlobalSettingsProvider"/>
  <reporters>
    <hudson.maven.reporters.MavenMailer>
      <recipients>veraweb-commits@lists.evolvis.org</recipients>
      <dontNotifyEveryUnstableBuild>false</dontNotifyEveryUnstableBuild>
      <sendToIndividuals>false</sendToIndividuals>
      <perModuleEmail>false</perModuleEmail>
    </hudson.maven.reporters.MavenMailer>
  </reporters>
  <publishers>
    <hudson.plugins.sonar.SonarPublisher plugin="sonar@2.1">
      <jdk>(Inherit From Job)</jdk>
      <branch></branch>
      <language></language>
      <mavenOpts></mavenOpts>
      <jobAdditionalProperties></jobAdditionalProperties>
      <settings class="jenkins.mvn.DefaultSettingsProvider"/>
      <globalSettings class="jenkins.mvn.DefaultGlobalSettingsProvider"/>
      <usePrivateRepository>false</usePrivateRepository>
    </hudson.plugins.sonar.SonarPublisher>
  </publishers>
  <buildWrappers>
    <org.jvnet.hudson.plugins.m2release.M2ReleaseBuildWrapper plugin="m2release@0.14.0">
      <scmUserEnvVar></scmUserEnvVar>
      <scmPasswordEnvVar></scmPasswordEnvVar>
      <releaseEnvVar>IS_M2RELEASEBUILD</releaseEnvVar>
      <releaseGoals>-Platex -Prelease -PoA -Dresume=false release:prepare release:perform -DpreparationGoals=&quot;clean install&quot; -e</releaseGoals>
      <dryRunGoals>-Platex -Prelease -PoA -Dresume=false -DdryRun=true release:prepare -e</dryRunGoals>
      <selectCustomScmCommentPrefix>false</selectCustomScmCommentPrefix>
      <selectAppendHudsonUsername>false</selectAppendHudsonUsername>
      <selectScmCredentials>false</selectScmCredentials>
      <numberOfReleaseBuildsToKeep>1</numberOfReleaseBuildsToKeep>
    </org.jvnet.hudson.plugins.m2release.M2ReleaseBuildWrapper>
  </buildWrappers>
  <prebuilders/>
  <postbuilders>
    <hudson.tasks.Shell>
      <command>set -ex
ssh root@veraweb-po.lan.tarent.de &apos;service tomcat7 stop&apos;
scp vwoa/target/vw-online-registration.jar root@veraweb-po.lan.tarent.de:/service/vwoa/vwoa.jar
sleep 5
ssh root@veraweb-po.lan.tarent.de &apos;
	psql -U veraweb -h 127.0.0.1 veraweb
	rm -rf /var/lib/tomcat7/webapps/v*
    &apos; &lt;core/files/upgrade.sql
scp core/target/veraweb.war vwor/target/vwor.war root@veraweb-po.lan.tarent.de:/var/lib/tomcat7/webapps/
ssh root@veraweb-po.lan.tarent.de &apos;
	service tomcat7 start
	sleep 5
	svc -t /service/vwoa
    &apos;
: migration to tomcat8 later
exit 0</command>
    </hudson.tasks.Shell>
  </postbuilders>
  <runPostStepsIfResult>
    <name>SUCCESS</name>
    <ordinal>0</ordinal>
    <color>BLUE</color>
    <completeBuild>true</completeBuild>
  </runPostStepsIfResult>
</maven2-moduleset>
