#set($activeMenu = "Administration")
#set($title = "${placeholderWithTranslation.BROWSER_TITLE_DOCUMENT_TYPES}")
#set($elementNameSex = "${placeholderWithTranslation.GENDER_TYPE_DOCUMENT_TYPE}")
#set($elementNameSingular = "${placeholderWithTranslation.GENERIC_DOCUMENT_TYPE_SINGULAR}")
#set($elementNamePlural = "${placeholderWithTranslation.GENERIC_DOCUMENT_TYPE_PLURAL}")

##Values in per cent for table columns width
#set($column0 = 3)
#set($column1 = 5)
#set($column2 = 26)
#set($column3 = 21)
#set($column4 = 21)
#set($column5 = 11)
#set($column6 = 9)
#set($column7 = 7)
#set($column8 = 7)
#set($column9 = 3)
#set($column10 = 3)

#parse("inc/header.vm")

<div id="content_container">
	<div class="textRight marginBottom10" id="breadcrumb">
	    <strong>${placeholderWithTranslation.siesindhier}:</strong> <span><a href="${paths.staticWeb}do/" title="${placeholderWithTranslation.zurstartseite}">${placeholderWithTranslation.home}</a> > ${placeholderWithTranslation.administration} > ${placeholderWithTranslation.dokumenttypen}</span>
	</div>

	<h1>${placeholderWithTranslation.dokumenttypen}</h1>

	<form id="formlist" name="formlist" action="Doctype" method="POST">

		#if($listerrors.size() > 0)
		<vera-warn>
			#foreach($error in $listerrors)
				$error<br>
			#end
		</vera-warn>
		#end

		<input type="hidden" name="start" value="">
		<input type="hidden" name="selectNone" value="true">
		<input type="hidden" name="doInsert" value="true">
		<input type="hidden" name="doUpdate" value="true">
		<input type="hidden" name="doRemove" value="true">
		<input type="hidden" name="limit" value="" />


		<div id="main_content">

			#foreach($bean in $list)
				<input type="hidden" name="list" value="$bean.id">
			#end

			<div class="textRight mandatoryText tabs">* = ${placeholderWithTranslation.pflichtfelder}</div>

			<span id="actionPanel" class="inlineLabel">
    	       	<strong>${placeholderWithTranslation.GENERIC_DOCUMENT_TYPES_MARKED}</strong>
    	       	<input type="button" name="remove" onclick="askDelete()"  value="${placeholderWithTranslation.loschen}" title="${placeholderWithTranslation.markiertendokumenttypenloschen}" #if($grants.isAdmin()) class="submit" #else class="buttondisabled" vera-disabled #end>
            </span>

			<table class="fixed">
				##Set column size
				<col width="$column0%" />
   				<col width="$column1%" />
   				<col width="$column2%" />
   				<col width="$column3%" />
   				<col width="$column4%" />
   				<col width="$column5%" />
   				<col width="$column6%" />
   				<col width="$column7%" />
   				<col width="$column8%" />
   				<col width="$column9%" />
   				<col width="$column10%" />

				<tr>
					<th class="smallCell textCenter"><input type="checkbox" name="toggleAllSelect" id="toggleAllSelect" title="${placeholderWithTranslation.alledemarkieren}" #if($listselection.size() == $list.size()) checked#end/></th></th>
					<th class="smallCell textCenter">${placeholderWithTranslation.id}</th>
					<th>${placeholderWithTranslation.GENERIC_LABELLING}</th>
					<th class="textCenter">${placeholderWithTranslation.adresstyp}</th>
					<th class="textCenter">${placeholderWithTranslation.zeichensatz}</th>
					<th class="textCenter">${placeholderWithTranslation.format}</th>
					<th class="smallCell textCenter" title="${placeholderWithTranslation.eigenesdokumentfurpartner}">${placeholderWithTranslation.GENERIC_PARTNER_DOCUMENT}</th>
					<th class="smallCell textCenter" title="${placeholderWithTranslation.sortierreihenfolge}">${placeholderWithTranslation.GENERIC_SORT}</th>
					<th class="smallCell textCenter" title="${placeholderWithTranslation.GENERIC_MARK_LONG}">${placeholderWithTranslation.GENERIC_SIGN}</th>
					<th class="smallCell textCenter" title="${placeholderWithTranslation.gastgebermitausgeben}">${placeholderWithTranslation.GENERIC_GA}</th>
					<th class="smallCell textCenter" title="${placeholderWithTranslation.iststandardfursteuerdatei}">${placeholderWithTranslation.GENERIC_SD}</th>
				</tr>
				<tr>
					<td class="textCenter"><input type="hidden" id="add-modified" name="add-modified" value="false"><input type="checkbox" name="add-select" value="true" style="display: none;"></td>
					<td class="textCenter"><input type="hidden" name="add-id" value=""><em>${placeholderWithTranslation.neu}</em></td>
					<td class="textCenter"><input type="text" name="add-name" maxlength="200" value="" onchange="setModified('add')"></td>
					<td>
						<select name="add-addresstype" onchange="setModified('add')">
							<option value="1">${placeholderWithTranslation.geschaftlich}</option>
							<option value="2">${placeholderWithTranslation.privat}</option>
							<option value="3">${placeholderWithTranslation.GENERIC_MORE}</option>
						</select>
					</td>
					<td>
						<select name="add-locale" onchange="setModified('add')">
							<option value="1">${placeholderWithTranslation.GENERIC_LATIN}</option>
							<option value="2">${placeholderWithTranslation.zeichensatz} 1</option>
							<option value="3">${placeholderWithTranslation.zeichensatz} 2</option>
						</select>
					</td>
					<td>
						<select name="add-format" onchange="setModified('add')">
							<option value="sxc-document">OOo 1.1</option>
							<option value="ods-document">OOo 2.0</option>
							<option value="xls">MS Office</option>
							<option value="csv">CSV</option>
						</select>
					</td>
					<td class="textCenter"><input type="checkbox" name="add-partner" value="true"  title="${placeholderWithTranslation.eigenesdokumentfurpartner}" onchange="setModified('add')"></td>
					<td><input type="text" name="add-sortorder" value="" onchange="setModified('add')"></td>
					<td><input type="text" name="add-flags" value="" onchange="setModified('add')"></td>
					<td><input type="checkbox" name="add-host" value="true"  title="${placeholderWithTranslation.gastgebermitausgeben}" onchange="setModified('add')" checked></td>
					<td><input type="checkbox" name="add-isdefault" value="true" title="${placeholderWithTranslation.iststandardfursteuerdatei}" onchange="setModified('add')"; onlyOneStandard('add');></td>
				</tr>
				#foreach($bean in $list)
				<tr>
					<td class="textCenter"><input type="hidden" id="${bean.id}-modified" name="${bean.id}-modified" value="false"><input type="checkbox" name="${bean.id}-select" value="true"></td>
					<td class="textCenter"><input type="hidden" name="${bean.id}-id" value="$!bean.id">$!bean.id</td>
					<td class="textCenter"><input type="text" name="${bean.id}-name" value="$!message.text($bean.name)" onchange="setModified('$!bean.id')"></td>
					<td>
						<select name="${bean.id}-addresstype"  onchange="setModified('$!bean.id')">
							<option value="1"#if($bean.addresstype == 1) selected#end>${placeholderWithTranslation.geschaftlich}</option>
							<option value="2"#if($bean.addresstype == 2) selected#end>${placeholderWithTranslation.privat}</option>
							<option value="3"#if($bean.addresstype == 3) selected#end>${placeholderWithTranslation.GENERIC_MORE}</option>
						</select>
					</td>
					<td>
						<select name="${bean.id}-locale" onchange="setModified('$!bean.id')">
							<option value="1"#if($bean.locale == 1) selected#end>${placeholderWithTranslation.GENERIC_LATIN}</option>
							<option value="2"#if($bean.locale == 2) selected#end>${placeholderWithTranslation.zeichensatz} 1</option>
							<option value="3"#if($bean.locale == 3) selected#end>${placeholderWithTranslation.zeichensatz} 2</option>
						</select>
					</td>
					<td>
						<select name="${bean.id}-format" onchange="setModified('$!bean.id')">
							<option value="sxc-document"#if($bean.format == "sxc-document") selected #end>OOo 1.1</option>
							<option value="ods-document"#if($bean.format == "ods-document") selected #end>OOo 2.0</option>
							<option value="xls"#if($bean.format == "xls") selected #end>MS Office</option>
							<option value="csv"#if($bean.format == "csv") selected #end>CSV</option>
						</select>
					</td>
					<td class="textCenter"><input type="checkbox" name="${bean.id}-partner" value="true" #if($bean.partner) checked #end  title="${placeholderWithTranslation.eigenesdokumentfurpartner}" onchange="setModified('$!bean.id')"></td>
					<td class="textCenter"><input type="text" name="${bean.id}-sortorder" value="$!message.text($bean.sortorder)"onchange="setModified('$!bean.id')"></td>
					<td class="textCenter"><input type="text" name="${bean.id}-flags" value="$!message.text($bean.flags)" onchange="setModified('$!bean.id')"></td>
					<td class="textCenter"><input type="checkbox" name="${bean.id}-host" value="true" #if($bean.host) checked #end  title="${placeholderWithTranslation.gastgebermitausgeben}" onchange="setModified('$!bean.id')"></td>
					<td class="textCenter"><input type="checkbox" name="${bean.id}-isdefault" value="true" #if($bean.isdefault) checked #end  title="${placeholderWithTranslation.iststandardfursteuerdatei}" onchange="setModified('$!bean.id'); onlyOneStandard('$!bean.id');"></td>
				</tr>
				#end

    			#if ($listparam.count == 0)
                    <tr>
						<td colspan="99">${placeholderWithTranslation.eswurdenkeinedatengefunden}</td>
					</tr>
    			#end

				#set($itemName = "${placeholderWithTranslation.GENERIC_DOCUMENT_TYPE_PLURAL}")
				#parse("inc/list-navi-new.vm")
				#parse("inc/list-direct-new.vm")
			</table>

			#if($grants.isAdmin())
			<div class="textRight marginTop10" id="buttonPanel-bottom">
				<input type="submit" name="save" value="${placeholderWithTranslation.speichern}" class="mainButton" />
			</div>
			#end

			<input type="hidden" name="egal" value="egal" id="presave">
			<vera-info>
				<p><strong>${placeholderWithTranslation.GENERIC_TOOLTIP}</strong></p>
	   			<p><strong>${placeholderWithTranslation.GENERIC_FORMAT}:</strong> ${placeholderWithTranslation.HINT_FORMAT_INFO}</p>
	  			<p><strong>${placeholderWithTranslation.GENERIC_MARK_LONG}:</strong> ${placeholderWithTranslation.HINT_EVENT_MARK}</p>
			</vera-info>

			##Rueckfrage beim Loeschen
			<script type="text/javascript">
				function askDelete() {
				htmlConfirm(' ${placeholderWithTranslation.wirklichloschen}? ', new Array(' ${placeholderWithTranslation.GENERIC_YES} ', ' ${placeholderWithTranslation.GENERIC_NO} '), new Array("askDeleteYes();", "askDeleteNo();"));
			}
			function askDeleteYes() {
				hideDialogs();
				document.getElementById('presave').name='remove'
				document.getElementById('formlist').submit();
			}
			function askDeleteNo() {
				hideDialogs();
				showComboboxes();
			}
			</script>


        	</div>
		</form>

		<script type="text/javascript">
			function onlyOneStandard(name) {
				var frm = document.getElementById('formlist');
				var fields = frm.elements;
		    	for (var i = 0; i < fields.length; i++) {
		    		if (fields[i].type == 'checkbox' && fields[i].name.indexOf('-isdefault') != -1) {
						if (fields[i].name.indexOf(name) != 0) {
							fields[i].checked = false;
						}
		    		}
				}
			}
		</script>
		<script type="text/javascript">
		#if(!$grants.isAdmin())
			disableForm(document.getElementById('formlist'));
		#end
		</script>
</div>
#parse("inc/footer.vm")
