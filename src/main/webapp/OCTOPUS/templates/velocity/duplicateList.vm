#set($activeMenu = "Personen")
#set($title = "Importstatus - Dubletten &uuml;bernehmen")
#set($elementNameSex = "female")
#set($elementNameSingular = "Person")
#set($elementNamePlural = "Personen")

##Values in per cent for table columns width
#set($column0 = 3)
#set($column1 = 6)
#set($column2 = 13)
#set($column3 = 13)
#set($column4 = 13)
#set($column5 = 16)
#set($column6 = 19)
#set($column7 = 6)
#set($column8 = 19)

#parse("inc/header.vm")

<div id="content_container">

	<div id="breadcrumb" class="textRight marginBottom10">
		<strong>Sie sind hier:</strong> <span><a href="${paths.staticWeb}do/" title="Zur Startseite">Home</a> > Personen > <a href="${paths.staticWeb}do/ImportPersons" title="Zum Personen-Import">Personen-Import</a> > Importstatus</span>
	</div>
	<h1>Importstatus: vorhandene Dubletten bearbeiten</h1>

	#if($noDupsSelected)
		<vera-warn>
			Bitte markieren Sie die zu importierenden Personen.
		</vera-warn>
	#end

	<vera-info>
		Dubletten, die durch den <strong>Import hinzugefügt werden würden</strong>, sind mit einer Checkbox gekennzeichnet.
		Darunter befinden sich die bereits im System vorhandenen, entsprechenden Datens&auml;tze.<br />
		Beachten Sie, dass &auml; mit ae, &ouml; mit oe, &uuml; mit ue und &szlig; mit ss verglichen wird.<br />
		Um eine Dublette in den Import zu integrieren, m&uuml;ssen Sie sie &uuml;bernehmen.
	</vera-info>

	<form id="formlist" name="formlist" action="ImportPersonsEditDuplicates" method="POST">
		<input type="hidden" name="start" value=""/>
		<input type="hidden" name="limit" value=""/>
		<input type="hidden" name="selectNone" value="true"/>
		<input type="hidden" name="importId" value="$!importId"/>
		<input type="hidden" name="saveCount" value="$!saveCount"/>

		<span id="actionPanel" class="inlineLabel">
			<label>Markierte Person(en)
				<input type="submit" name="save" type="button" value="Als Dublette &uuml;bernehmen" title="Markierte Person(en) als Dublette &uuml;bernehmen"/>
			</label>
		</span>

		#if($list && $list.size() > 0)

			#foreach($bean in $list)
				<input type="hidden" name="list" value="$bean.id">
			#end

			<div id="main_content">
				<table class="sortable fixed">
					##Set column size
					<col width="$column0%" />
    				<col width="$column1%" />
    				<col width="$column2%" />
    				<col width="$column3%" />
    				<col width="$column4%" />
    				<col width="$column5%" />
    				<col width="$column6%" />
    				<col width="$column7%" />
					<col width="$column8%" />

					<tr>
						<th class="textCenter smallCell"><input type="checkbox" name="toggleAllSelect" id="toggleAllSelect" #if($listselection.size() == $list.size()) checked#end title="Alle (de)markieren"/></th>
						<th>ID</th>
						<th>Name</th>
						<th>Vorname</th>
						<th>Amtsbezeichnung</th>
						<th>Firma / Institution</th>
						<th>Stra&szlig;e</th>
						<th>PLZ</th>
						<th>Ort</th>
					</tr>

					#foreach($bean in $list)
						#set($person = $bean.mainLatin)
						#set($address = $bean.businessLatin)

					<tr>
						<td>
				##			<input type="hidden" name="${bean.id}-checked" #if($bean.dupcheckstatus == 1) value="true" #else value="false" #end>
				##			<input type="checkbox" name="${bean.id}-check" #if($bean.dupcheckstatus == 1 )checked #end value="true" >
							<input type="checkbox" name="${bean.id}-select" value="true" #if($listselection.indexOf($bean.id) != -1) checked #end onChange="selectionChange(this);"/>
						</td>
						<td><input type="hidden" name="${bean.id}-id" value="$bean.id"/>$!bean.id</td>
						<td width="170px">$!message.text($!bean.lastname_a_e1)</td>
						<td width="170px">$!message.text($!bean.firstname_a_e1)</td>
						<td width="150px">$!message.text($!bean.function_a_e1)</td>
						<td width="130px">$!message.text($!bean.company_a_e1)</td>
						<td width="200px">$!message.text($!bean.street_b_e1)</td>
						<td width="130px">$!message.text($!bean.zipcode_b_e1)</td>
						<td width="250px">$!message.text($!bean.city_b_e1)</td>
					</tr>
						#foreach($duplicate in $bean.getDuplicateList())
						#set($person = $duplicate.mainLatin)
						#set($address = $duplicate.businessLatin)
					<tr>
						<td>&nbsp;</td>
						<td>$!duplicate.id</td>
						<td width="170px">$!message.text($!duplicate.lastname_a_e1)</td>
						<td width="170px">$!message.text($!duplicate.firstname_a_e1)</td>
						<td width="150px">$!message.text($!duplicate.function_a_e1)</td>
						<td width="130px">$!message.text($!duplicate.company_a_e1)</td>
						<td width="200px">$!message.text($!duplicate.street_b_e1)</td>
						<td width="130px">$!message.text($!duplicate.zipcode_b_e1)</td>
						<td width="250px">$!message.text($!duplicate.city_b_e1)</td>
					</tr>
						#end
						#if($bean.hasMoreDuplicates())
					<tr>
						<td>&nbsp;</td>
						<td>...</td>
						<td>...</td>
						<td>...</td>
						<td>...</td>
						<td>...</td>
						<td>...</td>
						<td>...</td>
						<td>...</td>
					</tr>
						#end
					#end

					#set($itemName = "Personen")
					#parse("inc/list-navi-new.vm")

					<tr class="colspan">
						<td colspan="99">
							Anzahl zu speichernde Dubletten: $!listselection.size()
						</td>
					</tr>

				</table>
			</div>

		#else

			<div class="contentBoxColored grayBorder marginBottom20">
				Es wurden keine Einträge gefunden.
			</div>

		#end

		<span id="buttonPanel-top" class="textRight floatRight">
			<input type="button" id="button.cancel" name="button.cancel" value="Zur&uuml;ck zum Personenimport" class="mainButton" onclick="document.formlist.action='ImportPersonsStoredRecord';document.formlist.submit();" />
		</span>

	</form>

	<div class="clear"></div>
</div>


#parse("inc/footer.vm")
