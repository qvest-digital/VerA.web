#set($activeMenu = "Administration")
#if($maildraft && $maildraft.id)
	#set($title = "E-Mail-Vorlage bearbeiten: $!message.text($maildraft.name)")
#else
	#set($title = "Neue E-Mail-Vorlage anlegen")
#end

#set($elementNameSex = "female")
#set($elementNameSingular = "Vorlage")
#set($elementNamePlural = "Vorlagen")
#parse("inc/header.vm")

<form id="formlist" name="formlist" action="" method="POST">
	<input type="hidden" name="save" value="true"/>

	<div id="content_container">
        <div id="breadcrumb" class="textRight marginBottom10">
            <strong>${placeholderWithTranslation.siesindhier}</strong> <span><a href="${paths.staticWeb}do/" title="${placeholderWithTranslation.ZurStartseite}">${placeholderWithTranslation.Home}</a> > ${placeholderWithTranslation.Administration} > ${placeholderWithTranslation.EMailVorlage}</span>
        </div>

        <h1>${placeholderWithTranslation.EMailVorlage}</h1>

        #if($maildraft.errors.size() > 0)
            <vera-warn>
            	#foreach($error in $maildraft.errors)
            		$!message.plain($error)<br>
            	#end
            </vera-warn>
        #end

    	<input type="hidden" name="maildraft-id" value="$!maildraft.id"/>

    	<div class="textRight bold">* = ${placeholderWithTranslation.Pflichtfelder}</div>

        <table class="form">
			<tr>
            	<td class="bold width15"><label for="show-id">${placeholderWithTranslation.ID}</label></td>
            	<td><input type="text" id="show-id" name="show-id" value="$!message.text($maildraft.id)" class="id" vera-disabled /></td>
            </tr>
			<tr>
            	<td class="bold"><label for="maildraft-name">${placeholderWithTranslation.NamederVorlage}</label></td>
            	<td><input type="text" id="maildraft-name" name="maildraft-name" maxlength="200" value="$!message.text($maildraft.name)" /></td>
            </tr>
			<tr>
            	<td class="bold"><label for="maildraft-subject">${placeholderWithTranslation.Betreff}</label></td>
            	<td><input type="text" id="maildraft-subject" name="maildraft-subject" maxlength="200" value="$!message.text($maildraft.subject)" /></td>
            </tr>
			<tr>
            	<td class="bold"><label for="maildraft-text">${placeholderWithTranslation.Text}</label></td>
            	<td><textarea cols="50" rows="20" id="maildraft-text" class="width100" name="maildraft-text" >$!message.textarea($maildraft.text)</textarea></td>
            </tr>
			<tr>
            	<td class="bold"><label for="platzhalter">Platzhalter</label></td>
            	<td>
            		<div class="">
            			<select id="platzhalter" name="platzhalter" class="width15" >
            				<option value="firstname">${placeholderWithTranslation.Vorname}</option>
            				<option value="lastname">${placeholderWithTranslation.Nachname}</option>
            				<option value="salutation">${placeholderWithTranslation.Anrede</option>
            				<option value="title">${placeholderWithTranslation.AkadTitel}</option>
            				<option value="function">${placeholderWithTranslation.AmtsbezFunktion}</option>
            				<option value="company">${placeholderWithTranslation.FirmaInstitution}</option>
            				<option value="street">${placeholderWithTranslation.Strasze}</option>
            				<option value="zipcode">${placeholderWithTranslation.PLZ}</option>
            				<option value="city">${placeholderWithTranslation.Ort}</option>
            				<option value="country">${placeholderWithTranslation.Land}</option>
            				<option value="poboxzipcode">${placeholderWithTranslation.PostfachPLZ}</option>
            				<option value="pobox">${placeholderWithTranslation.PostfachNummer}</option>
            				<option value="suffix1">$!message.text($!config.suffix1)</option>
            				<option value="suffix2">$!message.text($!config.suffix2)</option>
            				<option value="phone">${placeholderWithTranslation.Telefon}</option>
            				<option value="fax">${placeholderWithTranslation.Fax}</option>
            				<option value="mobile">${placeholderWithTranslation.Mobil}}</option>
            				<option value="email">${placeholderWithTranslation.EMail}</option>
            				<option value="url">${placeholderWithTranslation.www}</option>
            			</select>
            				<input type="button" name="add" value="${placeholderWithTranslation.Hinzufugen}" onclick="addPlatzhalter(this);"/>
            		</div>
            	</td>
        	</tr>

            #if ($listparam.count == 0)
            	<tr><td colspan="2">${placeholderWithTranslation.KeineDatengefunden}</td></tr>
            #end
        </table>


        <div id="buttonPanel-bottom" class="textRight marginTop10">
        	<input type="submit" name="submit" value="${placeholderWithTranslation.Speichern}" title="${placeholderWithTranslation.Speichern}" class="mainButton" />
        	<input type="button" name="cancel" value="${placeholderWithTranslation.ZuruckzurVorlagenliste}" title="${placeholderWithTranslation.ZuruckzurVorlagenliste}" class="mainButton" onclick="window.location.href='MailDraftList?selectNone=true';" />
        </div>
	</div>

</form>

<script type="text/javascript">
	function addPlatzhalter(s) {
		var sel = document.getElementById('platzhalter');
		var text = sel.options[sel.selectedIndex].value;
		if (text.length > 0) {
			insertAtCursor(document.getElementById('maildraft-text'), '<' + text + '>');
		}
	}
</script>

#parse("inc/footer.vm")
