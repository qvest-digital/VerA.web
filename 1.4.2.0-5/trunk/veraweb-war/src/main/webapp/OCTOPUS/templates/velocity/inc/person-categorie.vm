#if($listerrors && $listerrors.size() > 0)
<vera-warn>
	<ul style="margin: 0px 0px 0px -10px;">
	#foreach($error in $listerrors)
		<li style="margin: 5px 0px 0px -5px;">$error</li>
	#end
	</ul>
</vera-warn>
#end

<input type="hidden" name="doInsert" value="true">
<input type="hidden" name="doUpdate" value="true">
<input type="hidden" name="doRemove" value="true">

#foreach($bean in $list)
	<input type="hidden" name="list" value="$bean.id">
#end

<span id="actionPanel" class="inlineLabel">
	#if($grants.mayWrite())
    	Markierte Katgorie(n) <input type="submit" name="remove" value="Entfernen" title="Markierte Kategorie(n) entfernen"/>
	#end
</span>
<div class="buttonPanel-top floatRight">
	#if($grants.mayWrite())
    	<input type="submit" name="save" value="Speichern" title="Speichern" class="mainButton"/>
	#end
</div>

#if(($list && $list.size() > 0) || $grants.mayWrite())
<table class="notBold">
	<tr>
		#if($list && $list.size() > 0 && $grants.mayWrite())
			<th class="textCenter smallCell"><input type="checkbox" name="toggleAllSelect" id="toggleAllSelect" title="Alle (de)markieren" #if($listselection.size() == $list.size()) checked#end #if(!$grants.mayWrite()) vera-disabled#end/></th>
		#end
		<th class="textCenter smallCell">ID</th>
		<th>Kategorien und Ereignisse</th>
		<th class="textCenter smallCell">Rang</th>
	</tr>
    #if($grants.mayWrite())
	<tr>
		#if($list && $list.size() > 0 && $grants.mayWrite())
    		<td class="textCenter smallCell"/>
		#end
		<input type="hidden" id="add-modified" name="add-modified" value="false"/>
		<td class="textCenter smallCell">
			<input type="hidden" name="add-id" value=""/>
			<input type="hidden" name="add-person" value="$!person.id"/>
			<em>neu</em>
		</td>
		<td>
			<select id="add-categorie" name="add-categorie" style="width:100%;" onchange="setModified('add')" #if(!$grants.mayWrite()) vera-disabled#end>
				<option value="">Bitte w&auml;hlen sie</option>
				#foreach($categorie in $allCategorie)
					<option value="$!categorie.id">$!message.plain($categorie.name)</option>
				#end
			</select>
		</td>
		<td class="textCenter">
			<input type="text" name="add-rank" value="$!message.text($bean.rank)" class="small50px" onchange="setModified('add')" #if(!$grants.mayWrite()) vera-disabled#end/>
		</td>
	</tr>
    #end
	#foreach($bean in $list)
		<tr #if($bean.flags == 1)class="repeat"#end>
            #if($grants.mayWrite())
			<td class="textCenter smallCell">
				<input type="hidden" id="${bean.id}-modified" name="${bean.id}-modified" value="false"/>
				<input type="checkbox" name="${bean.id}-select" value="true" #if($listselection.indexOf($bean.id) != -1) checked#end #if(!$grants.mayWrite()) vera-disabled#end/>
			</td>
            #end
			<td>
				<input type="hidden" name="${bean.id}-id" value="$!bean.id"><input type="hidden" name="${bean.id}-person" value="$!bean.person"/>
				<input type="hidden" name="${bean.id}-categorie" value="$!message.text($!bean.categorie)"/>
				$!message.text($!{bean.id})
			</td>
			<td>
				$!message.text($!bean.name) (#if($bean.flags == 99)Dipl.&nbsp;Corps#elseif($bean.flags == 1)Ereignis#else Kategorie#end)
            </td>
			<td>
				<input type="text" name="${bean.id}-rank" value="$!message.text($bean.rank)" class="small50px" onchange="setModified('$!bean.id')" #if(!$grants.mayWrite()) vera-disabled#end/>
			</td>
		</tr>
	#end
    
	#if ($listparam.count == 0)
    	<tr>
    		<td colspan="3">Es liegen keine Kategorien und Ereignisse vor</td>
    	</tr>
    #end
	
	#set($itemName = "Kategorien")
	#parse("inc/list-navi-new.vm")
	#parse("inc/list-direct-new.vm")
</table>


<vera-info vera-stay>
	Bei gr&uuml;n hinterlegten Eintr&auml;gen handelt es sich um wiederkehrende Ereignisse.
</vera-info>



#end