#set($activeMenu = "Administration")

## $Id$
#if($domain == 'ou')
#set($title = "Verwaltung - alle Benutzer im Mandanten")
#elseif($domain == 'all')
#set($title = "Verwaltung - alle Benutzer")
#else
#set($title = "Benutzer")
#end
#set($elementNameSex = "male")
#set($elementNameSingular = "Benutzer")
#set($elementNamePlural = "Benutzer")
#parse("inc/header.vm")	

<div id="content_container">

	<div id="breadcrumb" class="textRight marginBottom10">
	    	<strong>Sie sind hier:</strong> <span><a href="${paths.staticWeb}do/" title="Zur Startseite">Home</a> > Administration > Benutzer</span>
	</div>
	
	<h1>Benutzer</h1>
	
	<form id="formlist" name="formlist" action="$octopusRequest.task" method="POST">
		#if($listerrors && $listerrors.size() > 0)
		<vera-warn>
			#foreach($error in $listerrors)
				$error<br>
			#end
		</vera-warn>
		#end
		
		<input type="hidden" name="start" value="">
		<input type="hidden" name="selectNone" value="true">
		<input type="hidden" name="doInsert" value="true">
		<input type="hidden" name="doUpdate" value="true">
		<input type="hidden" name="doRemove" value="true">
		<input type="hidden" name="limit" value="" />
		#if($order)
			<input type="hidden" name="order" value="$order">
		#end
		
		<span class="inlineLabel" id="actionPanel">
			<strong>Markierte(n) Benutzer</strong>
			<input type="submit" name="remove" value="L&ouml;schen" class="button" title="Markierte(n) Benutzer l&ouml;schen" />
		</span>
		
		<div id="main_content">
					
			#foreach($bean in $list)
			<input type="hidden" name="list" value="$bean.id">
			#end
			
			<div class="textRight mandatoryText">* = Pflichtfelder</div>
			<table>
				<tr style="height: 20px;">
					<th class="smallCell textCenter"><input type="checkbox" name="toggleAllSelect" id="toggleAllSelect" title="Alle (de)markieren" #if($listselection.size() == $list.size()) checked#end/></th>
					<th class="smallCell textCenter">ID</th>
			#if($domain == 'all')
					<th>Mandant</th>
			#end
					<th>Benutzername*</th>
					<th>Benutzerrechte</th>
				</tr>
				<tr>
					<td class="textCenter"><input type="hidden" id="add-modified" name="add-modified" value="false"><input type="checkbox" name="add-select" value="true"  style="display: none;"></td>
					<td class="textCenter"><input type="hidden" name="add-id" value=""><em>neu</em></td>
			#if($domain == 'all')
					<td>
			 #if($allOrgUnit)
						<select id="add-orgunit" name="add-orgunit" onchange="setModified('add')">
							<option value="">Bitte ausw&auml;hlen</option>
			  #foreach($orgunit in $allOrgUnit)
							<option value="$orgunit.id">$!message.plain($orgunit.name)</option>
			  #end
						</select>
			 #else
						<input type="text" name="add-orgunit" value="" onchange="setModified('add')">
			 #end
					</td>
			#else
					<input type="hidden" name="add-orgunit" value="$!octopusConfig.personalConfig.orgUnitId">
			#end
					<td>
			#if($roleList)
						<select id="add-name" name="add-name" onchange="setModified('add')">
							<option value="">Bitte ausw&auml;hlen</option>
			 #foreach($role in $roleList)
							<option value="$role">$!message.plain($role)</option>
			 #end
						</select>
			#else
						<input type="text" name="add-name" value="" onchange="setModified('add')">
			#end
					</td>
					<td>
						<select id="add-role" name="add-role" onchange="setModified('add')">
							<option value="">Bitte ausw&auml;hlen</option>
							<option value="1">Lesen eingeschr&auml;nkt</option>
							<option value="2">Lesen uneingeschr&auml;nkt</option>
							<option value="6">Lesen und Schreiben eingeschr&auml;nkt</option>
							<option value="3">Lesen und Schreiben uneingeschr&auml;nkt</option>
							<option value="4">Mandant Administrieren</option>
			#if($domain == 'all')
							<option value="5">Administrieren</option>
			#end
						</select>
					</td>
				</tr>
			#foreach($bean in $list)
				<tr>
			 #if(!$bean.role || 5 != $bean.role || $domain == 'all')
					<td class="textCenter"><input type="hidden" id="${bean.id}-modified" name="${bean.id}-modified" value="false"><input type="checkbox" name="${bean.id}-select" value="true"></td>
					<td class="textCenter"><input type="hidden" name="${bean.id}-id" value="$!bean.id">$!{bean.id}</td>
			  #if($domain == 'all')
					<td>
			   #if($allOrgUnit)
						<select id="${bean.id}-orgunit" name="${bean.id}-orgunit" onchange="setModified('${bean.id}')">
							<option value="">Bitte ausw&auml;hlen</option>
			    #foreach($orgunit in $allOrgUnit)
							<option value="$orgunit.id" #if($orgunit.id==$bean.orgunit)selected#end>$!message.plain($orgunit.name)</option>
			    #end
						</select>
			   #else
						<input type="text" name="${bean.id}-orgunit" value="$!message.plain($bean.orgunit)" onchange="setModified('${bean.id}')">
			   #end
					</td>
			  #else
					<input type="hidden" name="${bean.id}-orgunit" value="$bean.orgunit">
			  #end
					<td><input type="hidden" name="${bean.id}-name" value="$!message.plain($bean.name)"/>$!message.plain($bean.name)</td>
					<td>
						<select id="${bean.id}-role" name="${bean.id}-role"  onchange="setModified('${bean.id}')">
							<option value="">inaktiv</option>
							<option value="1" #if(1==$bean.role)selected#end>Lesen eingeschr&auml;nkt</option>
							<option value="2" #if(2==$bean.role)selected#end>Lesen uneingeschr&auml;nkt</option>
							<option value="6" #if(6==$bean.role)selected#end>Lesen und Schreiben eingeschr&auml;nkt</option>
							<option value="3" #if(3==$bean.role)selected#end>Lesen und Schreiben uneingeschr&auml;nkt</option>
							<option value="4" #if(4==$bean.role)selected#end>Mandant Administrieren</option>
			  #if($domain == 'all')
							<option value="5" #if(5==$bean.role)selected#end>Administrieren</option>
			  #end
						</select>
					</td>
			 #else
					<td class="textCenter"><input type="hidden" id="${bean.id}-modified" name="${bean.id}-modified" value="false"><input type="checkbox" name="${bean.id}-select" value="true"  vera-disabled></td>
					<td class="textCenter"><input type="hidden" name="${bean.id}-id" value="$!bean.id">$!{bean.id}</td>
					<input type="hidden" name="${bean.id}-orgunit" value="$bean.orgunit">
					<td><input type="hidden" name="${bean.id}-name" value="$!message.plain($bean.name)"/>$!message.plain($bean.name)</td>
					<td class="textCenter"><input type="hidden" name="${bean.id}-role" value="5"><input type="text" name="${bean.id}-role-text" value="Administrieren" vera-disabled></td>
			 #end
				</tr>
			#end
			
    			#if ($listparam.count == 0)
                    <tr>
						<td colspan="99">Es wurden keine Daten gefunden</td>
					</tr>
    			#end
    			
			#set($itemName = "Benutzer")
			#parse("inc/list-navi-new.vm")
			#parse("inc/list-direct-new.vm")
			
			</table>

			
			<div class="textRight marginTop10" id="buttonPanel-bottom">
				<input type="submit" name="save" value="Speichern" title="Speichern" class="mainButton" />
			</div>
		</div>
	</form>
</div>
#parse("inc/footer.vm")