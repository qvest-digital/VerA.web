#set($activeMenu = "Administration")
#if($mailoutbox && $mailoutbox.id)
	#set($title = "E-Mail bearbeiten")
#else
	#set($title = "Neue E-Mail anlegen")
#end

#set($elementNameSex = "female")
#set($elementNameSingular = "E-Mail")
#set($elementNamePlural = "E-Mails")
#parse("inc/header.vm")

<div id="content_container">
    <form id="formlist" name="formlist" action="" method="POST">
        <input type="hidden" name="save" value="true"/>
        
        <div id="breadcrumb marginBottom10" class="textRight">
    		<strong>Sie sind hier:</strong> <span><a href="${paths.staticWeb}do/" title="Zur Startseite">Home</a> > Administration > Postausgang</span>
    	</div>
    
		<h1>Postausgang</h1>
    
        #if($mailoutbox.errors.size() > 0 || $mailoutbox.status == $mailoutbox.STATUS_ERROR || ($mailoutbox.errortext && $mailoutbox.errortext.length() > 0))
            <vera-warn>
				#foreach($error in $mailoutbox.errors)
            		$!message.plain($error)<br>
            	#end
            	#if($mailoutbox.status > 10 || ($mailoutbox.errortext && $mailoutbox.errortext.length() > 0))
            		Beim Versenden dieser E-Mail ist ein Fehler aufgetreten.
            		Sie k&ouml;nnen diese jetzt bearbeiten und erneut senden.
            	#end
            </vera-warn>
        #elseif($mailoutbox.status == 1)
            <vera-info>
            	Diese E-Mail wartet auf ihre Fertigstellung durch einen Benutzer.
            </vera-info>
        #elseif($mailoutbox.status == 2)
            <vera-info>
            	Diese E-Mail wartet auf ihre Versendung.
            </vera-info>
        #elseif($mailoutbox.status == 3)
            <vera-warn>
            	Diese E-Mail wird gerade versendet und sollte <strong>nicht bearbeitet</strong> werden.
            </vera-warn>
        #elseif($mailoutbox.status == 4)
            <vera-warn>
            	Diese E-Mail wurde bereits versendet und sollte <strong>nicht mehr bearbeitet</strong> werden.
            </vera-warn>
        #end
    
        <input type="hidden" name="mailoutbox-id" value="$!mailoutbox.id"/>
		
		<div class="textRight bold">* = Pflichtfelder</div>
        
        <table class="form">
			<tr>
            	<td class="width5"><label for="show-id">ID</label></td>
            	<td><input type="text" id="show-id" name="show-id" value="$!message.text($mailoutbox.id)" class="id" vera-disabled /></td>
            </tr>
			<tr>
            	<td><label for="mailoutbox-from">Von*</label></td>
            	<td><input type="text" id="mailoutbox-from" name="mailoutbox-from" maxlength="200" value="$!message.text($mailoutbox.from)" /></td>
            </tr>
			<tr>
            	<td><label for="mailoutbox-to">An*</label></td>
            	<td><input type="text" id="mailoutbox-to" name="mailoutbox-to" maxlength="200" value="$!message.text($mailoutbox.to)" /></td>
            </tr>
			<tr>
            	<td><label for="mailoutbox-subject">Betreff*</label></td>
            	<td><input type="text" id="mailoutbox-subject" name="mailoutbox-subject" maxlength="200" value="$!message.text($mailoutbox.subject)" /></td>
            </tr>
			<tr>
            	<td><label for="mailoutbox-text">Text</label></td>
            	<td><textarea cols="20" rows="20" id="mailoutbox-text" name="mailoutbox-text" >$!message.textarea($mailoutbox.text)</textarea></td>
			</tr>
            #if($mailoutbox.status == $mailoutbox.STATUS_ERROR || ($mailoutbox.errortext && $mailoutbox.errortext.length() > 0))
                <tr>
                	<td>Fehlerbeschreibung:</td>
                	<td>
                		<a id="show-errorlink" href="javascript:showBlock(document.getElementById('show-errortext')); hideBlock(document.getElementById('show-errorlink'));">technische Fehlermeldung einblenden</a>
                		<div id="show-errortext" name="show-errortext" style="display: none;">
                    		<a href="javascript:showBlock(document.getElementById('show-errorlink')); hideBlock(document.getElementById('show-errortext'));">technische Fehlermeldung ausblenden</a>
                    		<p>$!message.plain($mailoutbox.errortext)</p>
                		</div>
                	</td>
        		</tr>
            #end
        
            #if ($listparam.count == 0)
            	<tr><td colspan="2">Keine Daten gefunden.</td></tr>
            #end
        </table>
    
    	<div class="textRight marginTop10" id="buttonPanel-bottom">
			<input type="submit" name="submit" value="Speichern" title="Speichern" class="mainButton" />
			<input type="button" name="save" value="Zurück" title="Zurück" class="mainButton" onclick="window.location.href='MailOutboxList';" />
		</div>
    
    </form>
</div>
#parse("inc/footer.vm")