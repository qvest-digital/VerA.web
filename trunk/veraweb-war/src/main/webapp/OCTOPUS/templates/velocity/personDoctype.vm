#set($activeMenu = "Personen")
#if($person && $person)
#set($title = "Person bearbeiten: $!message.plain($person.MainLatin.SaveAs)")
#parse("inc/header.vm")
#else
#set($title = "Neue Person anlegen")
#parse("inc/header.vm")
#end


<div id="breadcrumb" class="textRight">
    <strong>Sie sind hier:</strong> <span><a href="${paths.staticWeb}do/" title="Zur Startseite">Home</a> > Personen > #if($person && $person.id)Person bearbeiten#else Person anlegen#end</span>
</div>

<h1>$title</h1>



<div id="content_container">


    #parse("inc/person-header.vm")

    <div id="main_content" class="tabs contentBox grayBorder marginBottom20">


        <div id="tabsMain">
            <ul class="gray-gradient"> <!-- Bitte das End-tag der <li>s immer mit in die nÃ¤chste Zeile nehmen (verhindert Mozilla styling bug) -->
                <li class="inactive" id="personendaten">Persondendaten
                </li><li class="inactive" id="anschriften">Anschriften
                </li><li class="active" id="dokumenttypen">Dokumenttypen
                </li><li class="inactive" id="kategorien">Kategorien</li>
            </ul>
        </div>



        <div class="contentBoxColored tabsContent">
        #if($persondoctype)
        #parse("inc/person-doctype2.vm")
        #else
        #parse("inc/person-doctype.vm")
        #end
        </div>
    </div>
</div>





<input type="hidden" id="inviteGuestReserve" name="inviteGuestReserve" value="false">
<input type="hidden" id="inviteGuestPartner" name="inviteGuestPartner" value="false">
<script type="text/javascript">
	function addToGuestList() {
		htmlConfirm('Soll dieser Gast auf Platz gesetzt werden?', new Array('Ja', 'Nein'), new Array("addToGuestQuestX1('false');", "addToGuestQuestX1('true');"));
	}
	
	function addToGuestQuestX1(answer) {
		document.getElementById('inviteGuestReserve').value = answer;
		htmlConfirm('Soll die Partnerin / der Partner mit eingeladen werden?', new Array('Ja', 'Nein'), new Array("addToGuestQuestX2('true');", "addToGuestQuestX2('false');"));
	}
	
	function addToGuestQuestX2(answer) {
		document.getElementById('inviteGuestPartner').value = answer;
		htmlWait();
		
		var url = '${paths.staticWeb}do/AddPersonToEventGuestList';
		url += '?list=$!{person.id}';
		url += '&$!{person.id}-id=${person.id}';
		url += '&$!{person.id}-select=true';
		url += '&$!{person.id}-reserve=' + document.getElementById('inviteGuestReserve').value;
		url += '&$!{person.id}-partner=' + document.getElementById('inviteGuestPartner').value;
		window.location.href = url;
	}
	
	#if(!$grants.mayWrite())
	disableForm(document.getElementById('formlist'));
	#end
	disableFormInput(document.getElementById('person-expire'));
	disableFormCheckbox(document.getElementById('person-iscompany'));
	hideBlock(document.getElementById('show-expire'));
</script>

#parse("inc/footer.vm")


<script type="text/javascript">


    $(function () {
        $('li#personendaten').click(function () {
            window.location.href = '${paths.staticWeb}do/ShowPerson?id=$!person.id&tab=person';
        });
        $('li#anschriften').click(function () {
            window.location.href = '${paths.staticWeb}do/ShowPerson?id=$!person.id&tab=anschrift';
        });
        $('li#kategorien').click(function () {
            window.location.href = '${paths.staticWeb}do/ShowPersonCategorieList?id=$!person.id';
        });
    });



</script>